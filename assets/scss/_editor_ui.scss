/* === CMS-2026 : UI DE L'ÉDITEUR (ARCHITECTURE COMPLÈTE) === */
@use "variables" as *;

// 1. TOKENS DE COULEURS
$sidebar-bg: #000000;
$sidebar-border: #333333;
$sidebar-text: #ffffff;
$sidebar-muted: #666666;
$sidebar-input: #1a1a1a;
$canvas-bg: #1a1a1a;
$accent-color: #ffffff;

// 2. MIXINS
@mixin flex-center {
    display: flex;
    align-items: center;
    justify-content: center;
}

// 3. RESET & SCROLLBARS
*, *::before, *::after { box-sizing: border-box; }

::-webkit-scrollbar { width: 4px; height: 4px; }
::-webkit-scrollbar-thumb { background: #007bff; border-radius: 10px; }

:root {
    --sidebar-bg: #{$sidebar-bg};
    --sidebar-border: #{$sidebar-border};
    --sidebar-text: #{$sidebar-text};
    --sidebar-muted: #{$sidebar-muted};
    --sidebar-input: #{$sidebar-input};
    --canvas-bg: #{$canvas-bg};
    --accent: #{$accent-color};
}

body.light-mode { 
    --canvas-bg: #e0e0e0; 
    --accent: #000000; 
}

// 4. ARCHITECTURE
html, body { 
    margin: 0; padding: 0; height: 100vh;
    
    /*overflow: hidden; */
    font-family: 'Inter', sans-serif; 
    background-color: var(--canvas-bg); 
    /*color: var(--accent); */
}




.editor-content, .paper {
    
    h1 {
        font-size: $font-size-h1;    // Utilise tes 2.5rem
        font-weight: $weight-bold;   // Utilise ton 700 ou 800
        margin-bottom: 1.5rem;
        line-height: 1.2;
        color: #1a1a1a;
    }

    h2 {
        font-size: $font-size-h2;    // Utilise tes 2rem (donc > 1.75)
        font-weight: 600;
        margin-top: 2.5rem;          // Plus d'espace pour un grand titre
        margin-bottom: 1.25rem;
        color: #333;
    }

    h3 {
        font-size: $font-size-h3;    // Utilise tes 1.5rem
        font-weight: 600;
        margin-top: 2rem;
        margin-bottom: 1rem;
        color: #333;
    }

    h4 {
        font-size: $font-size-h4;          // On descend doucement
        font-weight: 600;
        margin-top: 1.5rem;
        margin-bottom: 0.75rem;
        color: #444;
    }

    h5 {
        font-size: $font-size-h5;              // Taille du texte standard mais en gras
        font-weight: 600;
        margin-top: 1.25rem;
        margin-bottom: 0.5rem;
        color: #555;
    }
}






body:has(.master-grid) {
    overflow-y: auto !important;
    height: auto !important;
    display: flex;
    flex-direction: column;
    justify-content: flex-start !important;
    align-items: stretch;
}

.master-grid {
    width: 100%;
    position: relative;
    flex: 1; 
    display: block; 

}










/* SIDEBAR - STRICT NOIR */
.sidebar { 
    position: fixed; 
    top: 0; 
    left: 0; 
    bottom: 0; 
    width: 340px; 
    background-color: #000000 !important; 
    border-right: 1px solid var(--sidebar-border); 
    display: flex; 
    flex-direction: column; 
    z-index: 1500; 
    color: #ffffff; 
    transition: transform 0.3s ease; 

    body.sidebar-hidden & { transform: translateX(-340px); }

    &-header { 
        padding: 0px 25px 25px; /*hateur de la SIDEBAR*/
        border-bottom: 1px solid var(--sidebar-border); 
        display: flex; 
        align-items: center; 
        gap: 15px; 
        
        h2 { 
            font-size: 10px; 
            letter-spacing: 3px; 
            text-transform: uppercase; 
            margin: 0; 
            color: var(--sidebar-muted); 
            flex-grow: 1; 
        }
    }

    &-scroll { 
        flex: 1; 
        overflow-y: auto; 
        overflow-x: hidden; 
        padding: 20px 25px; 
    }

    &-footer { 
        padding: 20px 25px; 
        border-top: 1px solid var(--sidebar-border); 
        background-color: #000000; 
        flex-shrink: 0; 
    }
}

/* ÉLÉMENTS DU COCKPIT */
.admin-input { 
    width: 100%; background-color: var(--sidebar-input); 
    border: 1px solid var(--sidebar-border); color: var(--sidebar-text); 
    padding: 12px; margin-bottom: 12px; font-size: 11px; 
    border-radius: 4px; outline: none; 
}

.section-label { 
    font-size: 9px; color: var(--sidebar-muted); 
    text-transform: uppercase; margin-top: 25px; margin-bottom: 10px; 
    display: block; 
}

.preview-card-container { 
    width: 100%; aspect-ratio: 16/9; background: #111; 
    border: 1px solid var(--sidebar-border); border-radius: 4px; 
    overflow: hidden; margin-bottom: 8px; @include flex-center;
    
    img { width: 100%; height: 100%; object-fit: cover; }
}

.tool-btn { 
    background-color: var(--sidebar-input); 
    border: 1px solid var(--sidebar-border); 
    color: var(--sidebar-muted); // Gris par défaut (#666666)
    height: 40px; 
    cursor: pointer; 
    font-size: 10px; 
    font-weight: bold; 
    border-radius: 4px; 
    transition: 0.2s; 
    text-transform: uppercase; 
    @include flex-center; 
    width: 100%; 
    margin-bottom: 5px; 

    // ICI : On force les rectangles de l'icône à suivre la couleur du texte
    svg rect {
        fill: currentColor !important; 
        transition: fill 0.2s;
    }

    &:hover { 
        border-color: #555; 
        color: #fff; // Devient blanc au survol, le SVG suivra grâce à currentColor
    }
}

/* BOUTONS ACTIONS */
.btn-gmail { background:#ea4335 !important; color:#ffffff !important; border:none; padding:15px; font-weight:900; cursor:pointer; text-transform:uppercase; font-size:10px; border-radius:4px; width: 100%; margin-bottom: 10px; display: block; text-align: center; text-decoration: none; }
.btn-publish { background:#ffffff !important; color:#000000 !important; border:none; padding:15px; font-weight:900; cursor:pointer; text-transform:uppercase; font-size:10px; border-radius:4px; width: 100%; margin-bottom: 10px; display: block; text-align: center; }
.btn-exit { color:var(--sidebar-muted); text-align:center; font-size:10px; text-decoration:none; border:1px solid var(--sidebar-border); padding:10px; border-radius:4px; text-transform:uppercase; font-weight:bold; display: block; width: 100%; }

/* GAUGES */
.gauge-row { 
    background-color: var(--sidebar-input); padding: 15px; 
    border-radius: 6px; margin-bottom: 10px; border: 1px solid var(--sidebar-border); 
}
.gauge-info { display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 10px; color: var(--sidebar-muted); }
input[type="range"] { width: 100%; accent-color: #fff; cursor: pointer; }

/* CANVAS & PAPER - CORRECTION ALIGNEMENT */
.canvas { 
    position: absolute; 
    top: 0; 
    left: 340px; /* RÉACTIVÉ : Le canvas commence après la sidebar */
    right: 0; 
    bottom: 0; 
    overflow-y: auto; 
    padding: 0; 
    transition: left 0.3s ease; 
    display: block; 
    background-color: var(--canvas-bg);
    
    body.sidebar-hidden & { left: 0 !important; }
}

.responsive-switcher { 
    position: sticky; 
    top: 0; 
    z-index: 100;
    background-color: var(--canvas-bg);
    display: flex; 
    justify-content: center; 
    gap: 10px; 
    padding: 15px 0; 
    width: 100%; 
    border-bottom: 1px solid var(--sidebar-border);
}

.paper {
    width: 95%; /* Ajusté pour le centrage dynamique */
    max-width: 850px; 
    background: #ffffff; 
    color: #000000 !important;
    min-height: 1100px; 
    height: auto; 
    padding: 60px; 
    box-shadow: 0 40px 100px rgba(0,0,0,0.5); 
    position: relative; 
    display: flow-root; 
    transition: width 0.3s ease, max-width 0.3s ease;
    margin: 40px auto !important; // Force le centrage horizontal
    overflow: visible; 
}

#main-title { 
    margin-top: 0 !important; padding-top: 0 !important; 
    line-height: 0.8 !important; display: inline-block; width: 100%; 
}

/* GESTION DES BLOCS */
.block-container { 
    position: relative; margin-bottom: 5px; width: 100%; clear: both; 
    
    .delete-block { 
        position: absolute; left: -25px; top: 0; background: #ff4d4d; 
        color: white; width: 20px; height: 20px; border-radius: 2px; 
        @include flex-center; font-size: 9px; cursor: pointer; 
        opacity: 0; z-index: 10; 
    }

    &:hover .delete-block { opacity: 1; }
}






























/* editor_ui.scss - ALIGNÉ SUR LE MODÈLE DE RÉFÉRENCE */
.ico-txt-align {
    display: inline-block;
    width: 16px;
    height: 12px;    
    position: relative;
    vertical-align: middle;
    box-sizing: border-box;
    border-top: 2px solid #fff; 

    &::after {
        content: "";
        position: absolute;
        bottom: 0; 
        left: 0;
        width: 100%; 
        height: 2px;
        background: #fff;
    }

    &::before {
        content: "";
        position: absolute;
        top: 4px; 
        height: 2px;
        background: #fff;
    }
}

.ico-txt-left::before   { left: 0; width: 10px; }
.ico-txt-center::before { left: 3px; width: 10px; }
.ico-txt-right::before  { right: 0; width: 10px; }












































// Icônes de FLOAT (Le carré représente l'image)
/* ICÔNES DE POSITIONNEMENT (REVISITÉES SELON SCHÉMA) */
.ico-ui {
    display: inline-block;
    width: 20px;
    height: 14px;
    position: relative;
}

// Image à Gauche
.ico-float-left {
    // Simule les lignes de texte en arrière-plan
    border-top: 2px solid #555; 
    &::after {
        content: "";
        position: absolute;
        top: 4px; left: 0;
        width: 100%; height: 2px;
        background: #555;
        box-shadow: 0 4px 0 #555, 0 8px 0 #555; // Lignes supplémentaires
    }
    // Le carré blanc (l'image) par-dessus
    &::before {
        content: "";
        position: absolute;
        top: 0; left: 0;
        width: 9px; height: 7px;
        background: #fff;
        z-index: 2;
    }
}

// Image Pleine Largeur
.ico-full {
    border-top: 2px solid #555;
    &::before {
        content: "";
        position: absolute;
        top: 2px; left: 0;
        width: 100%; height: 8px;
        background: #fff; // Rectangle blanc central
    }
    &::after {
        content: "";
        position: absolute;
        bottom: 0; left: 0;
        width: 100%; height: 2px;
        background: #555;
    }
}

// Image à Droite
.ico-float-right {
    border-top: 2px solid #555;
    &::after {
        content: "";
        position: absolute;
        top: 4px; left: 0;
        width: 100%; height: 2px;
        background: #555;
        box-shadow: 0 4px 0 #555, 0 8px 0 #555;
    }
    &::before {
        content: "";
        position: absolute;
        top: 0; right: 0;
        width: 9px; height: 7px;
        background: #fff;
        z-index: 2;
    }
}




/* === RÉPARATION DES GRILLES DU COCKPIT === */
.sidebar-scroll {
    // On active la grille pour chaque rangée
    .row-h, .row-styles, .row-align, .row-float, .row-cols { 
        display: grid !important; 
        gap: 8px !important; 
        margin-bottom: 12px !important;
        
        // On s'assure que les boutons ne prennent pas toute la hauteur
        .tool-btn {
            margin-bottom: 0 !important; 
            height: 38px !important;
            @include flex-center;
            width: 100% !important;
        }
    }
    
    // On définit le nombre de colonnes pour chaque type de rangée
    .row-h      { grid-template-columns: repeat(5, 1fr) !important; } // H1 à H5
    .row-styles { grid-template-columns: repeat(3, 1fr) !important; } // B, I, Color
    .row-align  { grid-template-columns: repeat(3, 1fr) !important; } // Gauche, Centre, Droite
    .row-float  { grid-template-columns: repeat(3, 1fr) !important; } // Float L, Full, Float R
    .row-cols   { grid-template-columns: repeat(2, 1fr) !important; } // 2 Cols, 3 Cols
}

/* PETIT AJUSTEMENT POUR L'ICÔNE COLONNE (Optionnel) */
.ico-col-3 {
    display: flex !important;
    gap: 2px;
    width: 100%;
    span { flex: 1; height: 10px; border: 1px solid #fff; }
}
/*ICONES DE COLEONNES*/




/* TRIGGER SIDEBAR */
.sidebar-trigger { 
    position: fixed; 
    top: 15px; 
    left: 355px; 
    z-index: 2000; 
    background: #ffffff; 
    color: #000000; 
    border: 1px solid #ddd; 
    width: 35px; 
    height: 35px; 
    border-radius: 4px; 
    cursor: pointer; 
    font-weight: bold; 
    transition: left 0.3s ease;
    @include flex-center;

    body.sidebar-hidden & { left: 15px !important; }
}




/* Passage des blocs float en empilement sur mobile */
/* Force le mode empilé sur mobile */


/*
@media (max-width: 768px) {
    #editor-core .block-container {
        .image-placeholder[style] { // Le [style] cible les attributs injectés par le JS
            float: none !important;
            width: 100% !important;
            margin-left: 0 !important;
            margin-right: 0 !important;
            margin-bottom: 15px !important;
        }
        
        p {
            display: block !important;
            width: 100% !important;
            clear: both !important;
        }
    }
}*/