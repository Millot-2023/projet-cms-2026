/* === CMS-2026 : UI DE L'ÉDITEUR (ARCHITECTURE COMPLÈTE) === */
@use "variables" as *;

// 1. TOKENS DE COULEURS
$sidebar-bg: #000000;
$sidebar-border: #333333;
$sidebar-text: #ffffff;
$sidebar-muted: #666666;
$sidebar-input: #1a1a1a;
$canvas-bg: #1a1a1a;
$accent-color: #ffffff;

// 2. MIXINS
@mixin flex-center {
    display: flex;
    align-items: center;
    justify-content: center;
}

// 3. RESET & SCROLLBARS
*, *::before, *::after { box-sizing: border-box; }

::-webkit-scrollbar { width: 4px; height: 4px; }
::-webkit-scrollbar-thumb { background: #007bff; border-radius: 10px; }

:root {
    --sidebar-bg: #{$sidebar-bg};
    --sidebar-border: #{$sidebar-border};
    --sidebar-text: #{$sidebar-text};
    --sidebar-muted: #{$sidebar-muted};
    --sidebar-input: #{$sidebar-input};
    --canvas-bg: #{$canvas-bg};
    --accent: #{$accent-color};
}

body.light-mode { 
    --canvas-bg: #e0e0e0; 
    --accent: #000000; 
}

// 4. ARCHITECTURE
html, body { 
    margin: 0; padding: 0; height: 100vh; overflow: hidden; 
    font-family: 'Inter', sans-serif; 
    background-color: var(--canvas-bg); 
    color: var(--accent); 
}

/* SIDEBAR - STRICT NOIR */
.sidebar { 
    position: fixed; 
    top: 0; 
    left: 0; 
    bottom: 0; 
    width: 340px; 
    background-color: #000000 !important; 
    border-right: 1px solid var(--sidebar-border); 
    display: flex; 
    flex-direction: column; 
    z-index: 1500; 
    color: #ffffff; 
    transition: transform 0.3s ease; 

    body.sidebar-hidden & { transform: translateX(-340px); }

    &-header { 
        padding: 40px 25px 25px; 
        border-bottom: 1px solid var(--sidebar-border); 
        display: flex; 
        align-items: center; 
        gap: 15px; 
        
        h2 { 
            font-size: 10px; 
            letter-spacing: 3px; 
            text-transform: uppercase; 
            margin: 0; 
            color: var(--sidebar-muted); 
            flex-grow: 1; 
        }
    }

    &-scroll { 
        flex: 1; 
        overflow-y: auto; 
        overflow-x: hidden; 
        padding: 20px 25px; 
    }

    &-footer { 
        padding: 20px 25px; 
        border-top: 1px solid var(--sidebar-border); 
        background-color: #000000; 
        flex-shrink: 0; 
    }
}

/* ÉLÉMENTS DU COCKPIT */
.admin-input { 
    width: 100%; background-color: var(--sidebar-input); 
    border: 1px solid var(--sidebar-border); color: var(--sidebar-text); 
    padding: 12px; margin-bottom: 12px; font-size: 11px; 
    border-radius: 4px; outline: none; 
}

.section-label { 
    font-size: 9px; color: var(--sidebar-muted); 
    text-transform: uppercase; margin-top: 25px; margin-bottom: 10px; 
    display: block; 
}

.preview-card-container { 
    width: 100%; aspect-ratio: 16/9; background: #111; 
    border: 1px solid var(--sidebar-border); border-radius: 4px; 
    overflow: hidden; margin-bottom: 8px; @include flex-center;
    
    img { width: 100%; height: 100%; object-fit: cover; }
}

.tool-btn { 
    background-color: var(--sidebar-input); border: 1px solid var(--sidebar-border); 
    color: var(--sidebar-muted); height: 40px; cursor: pointer; 
    font-size: 10px; font-weight: bold; border-radius: 4px; 
    transition: 0.2s; text-transform: uppercase; 
    @include flex-center; width: 100%; margin-bottom: 5px; 

    &:hover { border-color: #555; color: #fff; }
}

/* BOUTONS ACTIONS */
.btn-gmail { background:#ea4335 !important; color:#ffffff !important; border:none; padding:15px; font-weight:900; cursor:pointer; text-transform:uppercase; font-size:10px; border-radius:4px; width: 100%; margin-bottom: 10px; display: block; text-align: center; text-decoration: none; }
.btn-publish { background:#ffffff !important; color:#000000 !important; border:none; padding:15px; font-weight:900; cursor:pointer; text-transform:uppercase; font-size:10px; border-radius:4px; width: 100%; margin-bottom: 10px; display: block; text-align: center; }
.btn-exit { color:var(--sidebar-muted); text-align:center; font-size:10px; text-decoration:none; border:1px solid var(--sidebar-border); padding:10px; border-radius:4px; text-transform:uppercase; font-weight:bold; display: block; width: 100%; }

/* GAUGES */
.gauge-row { 
    background-color: var(--sidebar-input); padding: 15px; 
    border-radius: 6px; margin-bottom: 10px; border: 1px solid var(--sidebar-border); 
}
.gauge-info { display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 10px; color: var(--sidebar-muted); }
input[type="range"] { width: 100%; accent-color: #fff; cursor: pointer; }

/* CANVAS & PAPER */
.canvas { 
    position: absolute; 
    top: 0; 
    left: 340px; 
    right: 0; 
    bottom: 0; 
    overflow-y: auto; 
    padding: 0; 
    transition: left 0.3s ease; 
    display: block; 
    
    body.sidebar-hidden & { left: 0; }
}

.responsive-switcher { 
    position: sticky; 
    top: 0; 
    z-index: 100;
    background-color: var(--canvas-bg);
    display: flex; 
    justify-content: center; 
    gap: 10px; 
    padding: 15px 0; 
    width: 100%; 
    border-bottom: 1px solid var(--sidebar-border);
}

.paper {
    width: 100%; 
    max-width: 850px; 
    background: #ffffff; 
    color: #000000; 
    min-height: 1100px; 
    height: auto; 
    padding: 60px; 
    box-shadow: 0 40px 100px rgba(0,0,0,0.5); 
    position: relative; 
    display: flow-root; 
    transition: width 0.3s ease, max-width 0.3s ease;
    margin: 40px auto; 
    overflow: visible; 
}

#main-title { 
    margin-top: 0 !important; padding-top: 0 !important; 
    line-height: 0.8 !important; display: inline-block; width: 100%; 
}

/* GESTION DES BLOCS */
.block-container { 
    position: relative; margin-bottom: 5px; width: 100%; clear: both; 
    
    .delete-block { 
        position: absolute; left: -25px; top: 0; background: #ff4d4d; 
        color: white; width: 20px; height: 20px; border-radius: 2px; 
        @include flex-center; font-size: 9px; cursor: pointer; 
        opacity: 0; z-index: 10; 
    }

    &:hover .delete-block { opacity: 1; }
}

/* GRILLES DU COCKPIT */
.sidebar-scroll {
    .row-h, .row-styles, .row-float { 
        display: grid !important; 
        gap: 8px !important; 
        margin-bottom: 10px !important;
        
        .tool-btn {
            margin-bottom: 0 !important; 
            height: 35px !important;
            width: 100% !important;
            background: var(--sidebar-input) !important;
            font-size: 10px !important;
            @include flex-center; 
            
            svg, i {
                width: 14px !important;
                height: 14px !important;
                display: block !important;
            }
        }
    }

    .row-h { grid-template-columns: repeat(4, 1fr) !important; } 
    .row-styles { grid-template-columns: repeat(3, 1fr) !important; }
    .row-float { grid-template-columns: repeat(3, 1fr) !important; }

    /* ICÔNES ALIGNEMENT STABILISÉES */
    .btn-align {
        .icon-box {
            display: flex !important;
            flex-direction: column;
            justify-content: center;
            gap: 3px;
            width: 18px;
            height: 14px;

            span {
                display: block !important;
                height: 2px;
                background-color: var(--sidebar-muted);
                border-radius: 1px;
                transition: background 0.2s, width 0.2s;
            }
        }

        .left span:nth-child(2) { width: 12px; }
        .center { align-items: center; span:nth-child(2) { width: 12px; } }
        .right { align-items: flex-end; span:nth-child(2) { width: 12px; } }
        .full span { width: 18px; }

        &:hover .icon-box span { background-color: #ffffff; }
    }
}

/* TRIGGER SIDEBAR */
.sidebar-trigger { 
    position: fixed; 
    top: 15px; 
    left: 355px; 
    z-index: 2000; 
    background: #ffffff; 
    color: #000000; 
    border: 1px solid #ddd; 
    width: 35px; 
    height: 35px; 
    border-radius: 4px; 
    cursor: pointer; 
    font-weight: bold; 
    transition: left 0.3s ease;
    @include flex-center;

    body.sidebar-hidden & { left: 15px; }
}